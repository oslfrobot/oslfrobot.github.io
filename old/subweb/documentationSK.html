<!DOCTYPE html>

<html>

 <head>
	 
 	<link rel="stylesheet" href="../style/lite.css">
  <link rel="icon" href="../previews/icon.png">
 	<meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8"> 
 <title>Dokumentácia</title>

 </head>

 

<body>

  <div id="content"class="obsah">
<br>
<h1>Dokumentácia</h1>
<br>
<h2>Obsah:</h2>
<ol type="1">
<a href="documentationSK.html#needed"><li>Potrebné</li></a>
<a href="documentationSK.html#hardware"><li>Hardvér</li></a>
<a href="documentationSK.html#software"><li>Software</li></a>
<a href="documentationSK.html#programming"><li>Programming</li></a>
</ol>
<br>
<p>S týmto návodom to dokážete!</p>

<div id="needed">
<br>
<h2>Čo potrebujete:</h2>
<ul>
<li><a href="https://www.keyestudio.com/keyestudio-uno-r3-atmega328p-development-board-usb-cable-for-arduino-p0513-p0513.html"><a1>1X </a1>Keystudio UNO r3</a></li>
<li><a href="https://www.pololu.com/product/2820"><a1>2X </a1>Continous servo FS90R</a></li>
<li><a href="https://www.pololu.com/product/2819"><a1>2X </a1>Kolečko na servo</a></li>
<li><a href="https://www.ebay.com/itm/IR-Infrared-Obstacle-Avoidance-Sensor-Module-for-Arduino-Smart-Car-Robot-CA-NEW-/141975948572"><a1>1X </a1>Infračervený senzor</a></li>
<li><a href="https://www.ebay.com/itm/Circuit-Board-Double-sided-Universal-Prototyping-PCB-Printed-Breadboard-5-10-Pcs/163180975902?_trkparms=aid=555018&algo=PL.SIM&ao=1&asc=40719&meid=72bb2ea6c28c445ba8b19191884fb9b2&pid=100005&rk=5&rkt=12&sd=173815372566&itm=163180975902&pmt=1&noa=0&pg=2047675&_trksid=p2047675.c100005.m1851"><a1>2X </a1>Prototipovaciu DPS</a>
<li><a href="https://www.ebay.com/itm/3-7V-5000-mAh-105573-LiPo-Polymer-Battery-Rechargeable-Li-for-tablet-PC-PSP/264052247211?hash=item3d7abd8aab:g:6uUAAOSwXCVcgGAL"><a1>1X </a1>3.7V Batériu</a>
  <li><a href="https://www.ebay.com/itm/3-5A-DC-DC-Step-up-Boost-Voltage-Converter-Module-3V-3-3V-3-7V-to-5V-6V-9V-12V/282630674951?hash=item41ce19da07:m:mAwlH7u9rvBER4D2487_04A"><a1>1X </a1>Step up obvod (3.7V to 5V)</a></li>
    <li><a href="https://www.soselectronic.com/products/kingbright/l-53-src-c-12314"><a1>1X </a1>LED</a></li>
    <li><a href="https://www.soselectronic.com/products/yageo/rm-1-150-k-mf0207fte52-150k-1-31113"><a1>1X </a1>Rezistor 150k&#8486;</a></li>
    <li><a href="https://www.soselectronic.com/products/yageo/rm-1-1-k-mf0207fte52-1k-1-30867"><a1>1X </a1>Rezistor 1k&#8486;</a></li>
    <li><a href="https://www.soselectronic.com/products/kingbright/l-53-p3c-12401"><a1>1X </a1>Fototranzistor</a></li>
    <li><a href="https://www.soselectronic.com/products/no-name/p10s-2937"><a1>1X </a1>Mikrospínač</a></li>
    <li><a href="https://www.ebay.com/itm/20PCS-2-54mm-40-Pin-Male-Single-Row-Pin-Header-Strip-GOOD-QUALITY/381375094139?hash=item58cbba1d7b:g:Cw0AAOSwajVUN1s4"><a1>Nejaké piny</a1></a></li>

<li><a href="https://www.ebay.com/itm/40pc-10-30cm-Dupont-Jumper-Wire-Ribbon-GPIO-Cable-Arduino-Breadboard-F-F-M-M-F-M/132422423178?_trkparms=ispr=1&hash=item1ed4fdd28a:m:m68D4n08tnVu5u44jA6ZpCw&enc=AQAEAAACQBPxNw+Vj6nta7CKEs3N0qVxLys9LHt9AF798XxkD3Q/1dSdpF2qTBfsluyhoF93p/82KN0iXl7dotnTFZqmOkbAJ0l/5cCmg17d5qvbJkgQbxzf+gn0e/rS2/9mkSFJ1P5BOss/PmctZZQ3bt6o9uXV39X5iTpu6kqDkj0O1dYVGPtekg7069wjajjlVMfv/FoDn2nQnCc6qwJnrNESu1Hk37u2hLzEMPaAcsWkVXbhkYx6kUTl7RpZG/QS+hBEp11UDazJCUW8O0XieSrXcIHQJ1fISAIGjLpEgbo5VeFV7/Dwl1sN0qV2FrUAveU1CAzioBIFZuOmztG5bhsjXD6HN8R+azt6bH/MdEdvtc5R0NMgM6OS0kdlcZQuLb4DUNA5ClMBCtD4DDpi+qGOk1ChB4StNehMCZUOY+cgh7jbJL3D9rCejpiSSgrE6hnByb5sh1SUikHPn5FT8W16l2/A61Bntrv3GWkvGbaIuD2A4P92rISQQeO+NYCnBR3xW0zI1h0kobfS//0NwJDrko8ZoBxFCVy6cNFegw2EeTEftlRmmy89E5wJ3uzda8m8xZCOCNRrjrSm3P4pe7vjXZPnfYZ6iDeBqNpk6k2IIyndF4mGf+hv5yKVOAND4xzJ4R3jujhEs7dzVyEdDTqDol9+rgxGCJ5vr04nisjvRUIMH/bb5vEEy2QbIYeq1RROk/x+wGNgoNH+qKiTAo/ybGOb4w1+xTRFys+JfbSxKrnH1SRJv0C5/GQczTFKTO8atA==&checksum=132422423178fe4a1b7a4c0b4829b3609c27be597290"><a1>Nejaké káble</a1></a>
  <li><a1>M3 skrutky</a1></li>
<li><a1>3D tlačiareň</a1></li>
</ul>
<p>To je všetko!</p>
</div>

<div id="hardware">
<br>
<h2>Hardvér</h2>
<p>Najprv musíme vyrobiť senzor, tento robot na sledovanie čiary je iba s jedným senzorom, pre senzor potrebujeme jednu prototypovaciu DPS, LED, tri piny, spajkovačku, fototranzistor a oba odpory, 150 k&#8486; a 1k&#8486;.</p>
<a href="../pictures/sensor_resized.JPG"><img src="../previews/sensor_resized.JPG" alt="line sensor"></a>
<a href="../previews/SensorScheme.png"><img src="../previews/SensorScheme.png" alt="line sensor scheme"></a>
<p>Druhou vecou, ktorú musíte urobiť, je zapojenie, takže senzor na čiaru bude pripojený do GND, OUT na Analógový pin 0 na ADRUINO a VCC na 3,3 V na ARDUINO. Potom musíte pripojiť ostatné komponenty.

</p>
<iframe src="connectionSK.html" name="connection"></iframe>
<p>Kalibračný pin bude pripojený k tlačidlu na nasledujúcom DPS, kde budú pripojené všetky VCC (5V) a GND. Na to budete potrebovať spajkovačku, 15 pinov a káblov na spojenie všetkého dohromady.</p>
<a href="../pictures/nextPCB_resized.JPG"><img src="../previews/nextPCB_resized.JPG" alt="PCB with button"></a>
<p>Teraz, keď je všetko pripojené, stačí urobiť 3D tlačenú základňu a držiaky servo. Tieto časti si môžete stiahnuť kliknutím na tlačidlo nižšie.</p>
<br>
<a href="../documents/Holder.zip" download><button>Stiahni 3D modely</button></a>
<p>Ak ste ho vytlačili, musíte ho dať dokopy, môžete vidieť, ako to má vyzerať v <a href="picturesSK.html">sekcii obrázkov.</a></p>
</div>
<div id="software">
<br>
<h2>Softvér</h2>
<br>
<p>Ak ste robili niečo s arduino, môžete preskočiť priamo do programovacej sekcie <a href="documentationSK.html#programming">tu</a> ak ešte nie, začnite hneď teraz
<a href="https://www.arduino.cc/en/Main/Software" target="_blank">Arduino IDE </a>installation.</p>
<p>Ak ste ju nainštalovali, musíte svoju dosku nastaviť na arduino genuino/uno</p>
<a href="../pictures/boardselect.png"><img src="../pictures/boardselect.png" alt="Výber dosky"></a>
<p>Teraz je všetko hotové, stačí nahrať program do svojho robota sledovania čiary.</p>
<br>
</div>

<div id="programming">
  <br>
<h2>Programovanie</h2>
<p>Najprv musíme importovať knižnice a definovať niektoré premenné, ktoré budeme potrebovať v celom našom programe:<p>
    <ul style="list-style-type:none;">
  <li>#include <EEPROM.h></li>
  <li>#include <Servo.h></li>
  <li>Servo s1;</li>
  <li>Servo s2;</li>
  <li></li>
  <li>#define senzor A0</li>
  <li>#define IR 3</li>
  <li></li>
  <li>int x = 100; //počet meraní</li>
  <li>String farba;</li>
</ul>  
<br>
<p>Teraz je tu kalibračná funkcia, ktorá kalibruje vášho robota, ak je v kalibračnom režime, stačí ho umiestniť na čiaru a nakalibruje sa sám, ak nie sme v kalibračnom režime, bude to preskočené a robot bude pokračovať so svojími hodnotami uložených v pamäti EEPROM.</p>
<ul style="list-style-type:none;">
  <li>void kalibrácia()</li>
  <li>int nameranáČierna = 0;</li>
  <li>int nameranáBiela = 0;</li>
  <li></li>
  <li>for (int k = 0; k < x; k++) {</li>
  <li>nameranáČierna += analogRead(senzor);</li>
  <li>delay(10);</li>
  <li>}</li>
  <li></li>
  <li>EEPROM.write(0, 0);</li>
  <li>EEPROM.write(0, map((nameranáČierna / x), 0, 1023, 0, 255)); //čierna</li>
  <li>doprava();</li>
  <li>delay(400);</li>
  <li>stop();</li>
  <li>for (int j = 0; j < x; j++) {</li>
  <li>nameranáBiela += analogRead(senzor);</li>
  <li>delay(10);</li>
  <li>}</li>
  <li>EEPROM.write(1, 0);</li>
  <li>EEPROM.write(1, map((nameranáBiela / x), 0, 1023, 0, 255)); //biela</li>
  <li>Serial.println(EEPROM.read(1));</li>
  <li>Serial.println(EEPROM.read(0));</li>
  <li></li>
  <li>EEPROM.write(2, (EEPROM.read(1) + EEPROM.read(0)) / 2);</li>
  <li>Serial.println(EEPROM.read(2));</li>
  <li>delay(1000);</li>
  <li>}</li>
</ul>  
<br>
<p>Takže teraz naprogramujeme funkcie pre pohyb nášho robota:</p>

<ul style="list-style-type:none;">
  <li>void dopredu() {</li>
  <li>s1.write(0); // dopredu</li>
  <li>s2.write(180); // dopredu</li>
  <li>}</li>
  <li></li>
  <li>void doprava () {</li>
  <li>s1.write(90); // zastavený</li>
  <li>s2.write(180); // dopredu</li>
  <li>}</li>
  <li></li>
  <li>void doľava() {</li>
  <li>s1.write(0); // dopredu</li>
  <li>s2.write(90); // zastavený</li>
  <li>}</li>
  <li></li>
  <li>void dozadu() {</li>
  <li>s1.write(180); // dozadu</li>
  <li>s2.write(0); // dozadu</li>
  <li>}</li>
  <li></li>
  <li>void stop () {</li>
  <li>s1.write(90); // zastavený</li>
  <li>s2.write(90); // zastavený</li>
  <li>}</li>
  <li></li>
</ul>  
<br>
<p>Teraz sa potrebujeme dostať naokolo predmetu na čiare, urobíme to nasledujúcou funkciou:</p>
<ul style="list-style-type:none;">
  <li>void naokolo() {</li>
  <li>dozadu();</li>
  <li>delay(100);</li>
  <li>doprava();</li>
  <li>delay(500);</li>
  <li>dopredu();</li>
  <li>delay(1000);</li>
  <li>doľava();</li>
  <li>delay(1000);</li>
  <li>dopredu();</li>
  <li>delay(800);</li>
  <li>}</li>
</ul>  
<br>
<p>Už nám zostáva iba naprogramovať void loop() a void setup():</p>

<ul style="list-style-type:none;">
  <li>void setup() {</li>
  <li>s1.attach(9);</li>
  <li>s1.attach(10);</li>
  <li>pinMode(senzor, INPUT);</li>
  <li>Serial.begin(9600);</li>
  <li>delay(200);</li>
  <li>if (digitalRead(4) == HIGH)</li>
  <li>kalibrácia();</li>
</ul>  
<br>

<p> A loop, ak sme na bielom, ideme na čiernu, ale ak sme na čiernej, potom ideme na bielu, takže sme na okraji čiary.</p>

<ul style="list-style-type:none;">
  <li>void loop() {</li>
  <li>if (map(analogRead(senzor), 0, 1023, 0, 255) > (EEPROM.read(2) + 20)) {</li>
  <li>farba = "čierna";</li>
  <li>}</li>
  <li></li>
  <li>else if (map(analogRead(senzor), 0, 1023, 0, 255) < (EEPROM.read(2) + 20)) {</li>
  <li>farba = "biela";</li>
  <li>}</li>
  <li></li>
  <li>if (farba == "čierna") {</li>
  <li>right();</li>
  <li>}</li>
  <li></li>
  <li>if (farba == "biela") {</li>
  <li>left</li>
  <li>}</li>
  <li></li>
  <li>if (digitalRead(IR) == LOW) {</li>
  <li>naokolo();</li>
  <li>}</li>
  <li>}</li>

</ul>  
<br>
<p>Teraz to máte naprogramované, jednoducho nahrajte do robota a je to. Tento kód si môžete tiež stiahnuť nižšie.</p>
<a href="../documents/program.zip" download><button>Stiahni program</button></a>
<p><a href="documentationSK.html#content">Hore!</a></p>
</div>
</div>
</body>
<div class="navbar">
  <a href="../indexSK.html">Domov</a>
  <a href="picturesSK.html">Obrázky</a>
  <a href="aboutitSK.html">O tom</a>
  <a href="documentationSK.html">Dokumentácia</a>
  <a href="aboutusSK.html">O nás</a>
</div> 
<footer   class="foot_left">
	<p>Peter Borták & Eduard Lehocký</p>	
<a href="documentation.html">EN version</a>
	 <p1> © 2019</p1>
</footer>	

</html>
